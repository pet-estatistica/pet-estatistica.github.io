{{ define "main" }}
<section class="site-materials py-5">
  <div class="container">
    <!-- Cabeçalho -->
    <div class="row justify-content-center">
      <div class="col-lg-10 text-center mb-5">
        <h1 class="mb-4 display-4 fw-bold">{{ .Title }}</h1>
        <p class="lead text-muted">{{ .Description }}</p>
        
        <!-- Filtros por Categoria -->
        {{ if .Params.categories }}
        <div class="mt-4">
          <div class="btn-group" role="group">
            <button type="button" class="btn btn-outline-primary filter-btn active" data-filter="all">Todos</button>
            {{ range .Params.categories }}
            <button type="button" class="btn btn-outline-primary filter-btn" data-filter="{{ . | urlize }}">{{ . }}</button>
            {{ end }}
          </div>
        </div>
        {{ end }}
      </div>
    </div>

    <!-- Lista de Materiais -->
    <div class="row justify-content-center">
      <div class="col-lg-11">
        <div class="row materials-container">
          {{ range .Params.materials }}
          <div class="col-md-6 col-lg-4 mb-4 material-item" data-category="{{ .category | urlize }}">
            <div class="card h-100 shadow-sm border-0 overflow-hidden">
              <div class="card-img-top bg-light text-center py-4 position-relative">
                <i class="{{ .icon | default "fa fa-book" }} fa-3x text-primary"></i>
                {{ if .featured }}
                  <span class="position-absolute top-0 start-0 bg-warning text-dark px-2 py-1 small rounded-br">Destaque</span>
                {{ end }}
              </div>
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-start mb-2">
                  <span class="badge badge-primary">{{ .category }}</span>
                  <span class="small text-muted">{{ .date | time.Format "02/01/2006" }}</span>
                </div>
                <h5 class="card-title">{{ .title }}</h5>
                <p class="card-text text-muted">{{ .description }}</p>
              </div>
              <div class="card-footer bg-transparent border-0 pt-0 pb-3">
                <a href="{{ .link }}" class="btn btn-primary stretched-link">
                  Acessar Material <i class="fa fa-external-link ms-1 small"></i>
                </a>
              </div>
            </div>
          </div>
          {{ end }}
        </div>
      </div>
    </div>

    <!-- Mensagem quando não há materiais -->
    {{ if not .Params.materials }}
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center py-5">
        <div class="alert alert-info">
          <i class="fa fa-info-circle me-2"></i> Nenhum material disponível no momento.
        </div>
      </div>
    </div>
    {{ end }}
  </div>
</section>

<!-- CSS Personalizado -->
<style>
  .site-materials .card {
    transition: all 0.3s ease;
    border-radius: 0.5rem;
  }
  
  .site-materials .card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 24px rgba(0,0,0,0.1);
  }
  
  .site-materials .card-img-top {
    min-height: 160px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  }
  
  .site-materials .filter-btn.active {
    background-color: var(--bs-primary);
    color: white;
  }
  
  .material-item {
    transition: all 0.4s ease;
  }
  
  .material-item.hide {
    transform: scale(0.9);
    opacity: 0;
    height: 0;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }
</style>

<!-- JavaScript para Filtros -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const filterBtns = document.querySelectorAll('.filter-btn');
    
    filterBtns.forEach(btn => {
      btn.addEventListener('click', function() {
        // Ativa o botão clicado
        filterBtns.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        
        const filterValue = this.getAttribute('data-filter');
        const items = document.querySelectorAll('.material-item');
        
        items.forEach(item => {
          if (filterValue === 'all' || item.getAttribute('data-category') === filterValue) {
            item.classList.remove('hide');
          } else {
            item.classList.add('hide');
          }
        });
      });
    });
  });
</script>
{{ end }}